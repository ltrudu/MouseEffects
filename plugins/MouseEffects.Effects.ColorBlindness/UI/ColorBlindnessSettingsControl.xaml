<UserControl x:Class="MouseEffects.Effects.ColorBlindness.UI.ColorBlindnessSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MouseEffects.Effects.ColorBlindness.UI"
             mc:Ignorable="d" d:DesignWidth="320">
    <UserControl.Resources>
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="Margin" Value="0,8,0,4"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        <Style TargetType="Slider" x:Key="SliderStyle">
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="SectionStyle">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
    </UserControl.Resources>

    <StackPanel Margin="8">
        <!-- Header Row: Enabled checkbox | Title | Fold/Unfold button -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <CheckBox x:Name="EnabledCheckBox" Content="Enabled" Grid.Column="0"
                      VerticalAlignment="Center"
                      IsChecked="True" Checked="EnabledCheckBox_Changed" Unchecked="EnabledCheckBox_Changed"/>

            <TextBlock Text="Color Blindness" Grid.Column="1"
                       FontWeight="Bold" FontSize="14"
                       VerticalAlignment="Center" HorizontalAlignment="Center"/>

            <Button x:Name="FoldButton" Grid.Column="2"
                    Content="â–¼" Width="24" Height="24"
                    Background="Transparent" BorderThickness="0"
                    Click="FoldButton_Click" ToolTip="Expand/Collapse settings"/>
        </Grid>

        <!-- Description (always visible) -->
        <TextBlock Text="Simulates color blindness with RGB curve adjustment. Apply to circular, rectangular, or fullscreen areas."
                   Opacity="0.7" FontSize="12" TextWrapping="Wrap" Margin="0,4,0,0"/>

        <!-- Collapsible Content Panel -->
        <StackPanel x:Name="ContentPanel" Visibility="Collapsed" Margin="0,8,0,0">

            <!-- Shape Mode -->
            <TextBlock Text="Application Mode" Style="{StaticResource SectionStyle}"/>

            <TextBlock Text="Shape" Style="{StaticResource LabelStyle}"/>
            <ComboBox x:Name="ShapeModeCombo" SelectionChanged="ShapeModeCombo_SelectionChanged" Margin="0,0,0,8">
                <ComboBoxItem Content="Circle (around cursor)" IsSelected="True"/>
                <ComboBoxItem Content="Rectangle (around cursor)"/>
                <ComboBoxItem Content="Fullscreen"/>
            </ComboBox>

            <!-- Circle settings -->
            <StackPanel x:Name="CircleSettings">
                <TextBlock Text="Radius (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RadiusSlider" Minimum="50" Maximum="1920" Value="300"
                        Style="{StaticResource SliderStyle}" ValueChanged="RadiusSlider_ValueChanged"/>
                <TextBlock x:Name="RadiusValue" Text="300" Opacity="0.7" FontSize="11"/>
            </StackPanel>

            <!-- Rectangle settings -->
            <StackPanel x:Name="RectangleSettings" Visibility="Collapsed">
                <TextBlock Text="Width (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RectWidthSlider" Minimum="100" Maximum="1920" Value="400"
                        Style="{StaticResource SliderStyle}" ValueChanged="RectWidthSlider_ValueChanged"/>
                <TextBlock x:Name="RectWidthValue" Text="400" Opacity="0.7" FontSize="11"/>

                <TextBlock Text="Height (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RectHeightSlider" Minimum="100" Maximum="1080" Value="300"
                        Style="{StaticResource SliderStyle}" ValueChanged="RectHeightSlider_ValueChanged"/>
                <TextBlock x:Name="RectHeightValue" Text="300" Opacity="0.7" FontSize="11"/>
            </StackPanel>

            <TextBlock Text="Edge Softness" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="EdgeSoftnessSlider" Minimum="0" Maximum="1" Value="0.2"
                    Style="{StaticResource SliderStyle}" ValueChanged="EdgeSoftnessSlider_ValueChanged"/>
            <TextBlock x:Name="EdgeSoftnessValue" Text="0.20" Opacity="0.7" FontSize="11"/>

            <Separator Margin="0,12,0,8"/>

            <!-- Color Filter -->
            <TextBlock Text="Color Filter" Style="{StaticResource SectionStyle}"/>

            <!-- Single filter for Fullscreen mode -->
            <StackPanel x:Name="FullscreenFilterPanel" Visibility="Collapsed">
                <TextBlock Text="Filter Type" Style="{StaticResource LabelStyle}"/>
                <ComboBox x:Name="FilterTypeCombo" SelectionChanged="FilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                    <ComboBoxItem Content="None (curves only)"/>
                    <ComboBoxItem Content="Red-green (deuteranopia)"/>
                    <ComboBoxItem Content="Red-green (protanopia)"/>
                    <ComboBoxItem Content="Blue-yellow (tritanopia)"/>
                    <ComboBoxItem Content="Grayscale" IsSelected="True"/>
                    <ComboBoxItem Content="Grayscale inverted"/>
                    <ComboBoxItem Content="Inverted"/>
                </ComboBox>
            </StackPanel>

            <!-- Dual filters for Shape modes (Circle/Rectangle) -->
            <StackPanel x:Name="ShapeFilterPanel">
                <TextBlock Text="Inside Shape Filter Type" Style="{StaticResource LabelStyle}"/>
                <ComboBox x:Name="InsideFilterTypeCombo" SelectionChanged="InsideFilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                    <ComboBoxItem Content="None (curves only)"/>
                    <ComboBoxItem Content="Red-green (deuteranopia)"/>
                    <ComboBoxItem Content="Red-green (protanopia)"/>
                    <ComboBoxItem Content="Blue-yellow (tritanopia)"/>
                    <ComboBoxItem Content="Grayscale" IsSelected="True"/>
                    <ComboBoxItem Content="Grayscale inverted"/>
                    <ComboBoxItem Content="Inverted"/>
                </ComboBox>

                <TextBlock Text="Outside Shape Filter Type" Style="{StaticResource LabelStyle}"/>
                <ComboBox x:Name="OutsideFilterTypeCombo" SelectionChanged="OutsideFilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                    <ComboBoxItem Content="None" IsSelected="True"/>
                    <ComboBoxItem Content="Red-green (deuteranopia)"/>
                    <ComboBoxItem Content="Red-green (protanopia)"/>
                    <ComboBoxItem Content="Blue-yellow (tritanopia)"/>
                    <ComboBoxItem Content="Grayscale"/>
                    <ComboBoxItem Content="Grayscale inverted"/>
                    <ComboBoxItem Content="Inverted"/>
                </ComboBox>
            </StackPanel>

            <TextBlock Text="Intensity" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="IntensitySlider" Minimum="0" Maximum="1" Value="1"
                    Style="{StaticResource SliderStyle}" ValueChanged="IntensitySlider_ValueChanged"/>
            <TextBlock x:Name="IntensityValue" Text="1.00" Opacity="0.7" FontSize="11"/>

            <TextBlock Text="Color Boost (Saturation)" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="ColorBoostSlider" Minimum="0" Maximum="2" Value="1"
                    Style="{StaticResource SliderStyle}" ValueChanged="ColorBoostSlider_ValueChanged"/>
            <TextBlock x:Name="ColorBoostValue" Text="1.00" Opacity="0.7" FontSize="11"/>

            <Separator Margin="0,12,0,8"/>

            <!-- RGB Curves -->
            <TextBlock Text="RGB Curves" Style="{StaticResource SectionStyle}"/>

            <CheckBox x:Name="EnableCurvesCheckBox" Content="Enable RGB Curves" Margin="0,0,0,8"
                      IsChecked="False" Checked="EnableCurvesCheckBox_Changed" Unchecked="EnableCurvesCheckBox_Changed"/>

            <StackPanel x:Name="CurvesPanel">
                <TextBlock Text="Curve Strength" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="CurveStrengthSlider" Minimum="0" Maximum="1" Value="1"
                        Style="{StaticResource SliderStyle}" ValueChanged="CurveStrengthSlider_ValueChanged"/>
                <TextBlock x:Name="CurveStrengthValue" Text="1.00" Opacity="0.7" FontSize="11"/>

                <!-- Curve Editor -->
                <local:CurveEditor x:Name="CurveEditorControl" Height="200" Margin="0,8,0,0"
                                   CurveChanged="CurveEditorControl_CurveChanged"/>
            </StackPanel>

        </StackPanel>
    </StackPanel>
</UserControl>
