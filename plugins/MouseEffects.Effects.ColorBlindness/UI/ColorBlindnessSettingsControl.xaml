<UserControl x:Class="MouseEffects.Effects.ColorBlindness.UI.ColorBlindnessSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MouseEffects.Effects.ColorBlindness.UI"
             mc:Ignorable="d" d:DesignWidth="320">
    <UserControl.Resources>
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="Margin" Value="0,8,0,4"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
        <Style TargetType="Slider" x:Key="SliderStyle">
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="SectionStyle">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
    </UserControl.Resources>

    <StackPanel Margin="0">
        <!-- Header Row: Enabled checkbox | Title | Fold/Unfold button -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <CheckBox x:Name="EnabledCheckBox" Content="Enabled" Grid.Column="0"
                      VerticalAlignment="Center"
                      IsChecked="True" Checked="EnabledCheckBox_Changed" Unchecked="EnabledCheckBox_Changed"/>

            <TextBlock Text="Color Blindness" Grid.Column="1"
                       FontWeight="Bold" FontSize="14"
                       VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,8,0"/>

            <Button x:Name="FoldButton" Grid.Column="2"
                    Content="â–¼" Width="24" Height="24"
                    Background="Transparent" BorderThickness="0"
                    Click="FoldButton_Click" ToolTip="Expand/Collapse settings"/>
        </Grid>

        <!-- Description (always visible) -->
        <TextBlock Text="Corrects colors for color vision deficiency. Choose LMS (scientific) or RGB Matrix (customizable) mode."
                   Opacity="0.7" FontSize="12" TextWrapping="Wrap" Margin="0,4,0,0"/>

        <!-- Collapsible Content Panel -->
        <StackPanel x:Name="ContentPanel" Visibility="Collapsed" Margin="0,8,0,0">

            <!-- Shape Mode -->
            <TextBlock Text="Application Mode" Style="{StaticResource SectionStyle}"/>

            <TextBlock Text="Shape" Style="{StaticResource LabelStyle}"/>
            <ComboBox x:Name="ShapeModeCombo" SelectionChanged="ShapeModeCombo_SelectionChanged" Margin="0,0,0,8">
                <ComboBoxItem Content="Circle (around cursor)" IsSelected="True"/>
                <ComboBoxItem Content="Rectangle (around cursor)"/>
                <ComboBoxItem Content="Fullscreen"/>
            </ComboBox>

            <!-- Circle settings -->
            <StackPanel x:Name="CircleSettings">
                <TextBlock Text="Radius (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RadiusSlider" Minimum="50" Maximum="1920" Value="300"
                        Style="{StaticResource SliderStyle}" ValueChanged="RadiusSlider_ValueChanged"/>
                <TextBlock x:Name="RadiusValue" Text="300" Opacity="0.7" FontSize="11"/>
            </StackPanel>

            <!-- Rectangle settings -->
            <StackPanel x:Name="RectangleSettings" Visibility="Collapsed">
                <TextBlock Text="Width (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RectWidthSlider" Minimum="100" Maximum="1920" Value="400"
                        Style="{StaticResource SliderStyle}" ValueChanged="RectWidthSlider_ValueChanged"/>
                <TextBlock x:Name="RectWidthValue" Text="400" Opacity="0.7" FontSize="11"/>

                <TextBlock Text="Height (px)" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="RectHeightSlider" Minimum="100" Maximum="1080" Value="300"
                        Style="{StaticResource SliderStyle}" ValueChanged="RectHeightSlider_ValueChanged"/>
                <TextBlock x:Name="RectHeightValue" Text="300" Opacity="0.7" FontSize="11"/>
            </StackPanel>

            <TextBlock Text="Edge Softness" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="EdgeSoftnessSlider" Minimum="0" Maximum="1" Value="0.2"
                    Style="{StaticResource SliderStyle}" ValueChanged="EdgeSoftnessSlider_ValueChanged"/>
            <TextBlock x:Name="EdgeSoftnessValue" Text="0.20" Opacity="0.7" FontSize="11"/>

            <Separator Margin="0,12,0,8"/>

            <!-- Correction Method Selection -->
            <TextBlock Text="Correction Method" Style="{StaticResource SectionStyle}"/>
            <ComboBox x:Name="CorrectionMethodCombo" SelectionChanged="CorrectionMethodCombo_SelectionChanged" Margin="0,0,0,8">
                <ComboBoxItem Content="LMS Correction (scientific)" IsSelected="True"/>
                <ComboBoxItem Content="RGB Matrix (customizable)"/>
            </ComboBox>

            <!-- ============== LMS CORRECTION PANEL ============== -->
            <StackPanel x:Name="LMSSettingsPanel">
                <!-- Single filter for Fullscreen mode -->
                <StackPanel x:Name="LMSFullscreenPanel" Visibility="Collapsed">
                    <TextBlock Text="Correction Type" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="LMSFilterTypeCombo" SelectionChanged="LMSFilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="None" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia (red-blind)"/>
                        <ComboBoxItem Content="Protanomaly (red-weak)"/>
                        <ComboBoxItem Content="Deuteranopia (green-blind)"/>
                        <ComboBoxItem Content="Deuteranomaly (green-weak)"/>
                        <ComboBoxItem Content="Tritanopia (blue-blind)"/>
                        <ComboBoxItem Content="Tritanomaly (blue-weak)"/>
                        <ComboBoxItem Content="Achromatopsia (monochromacy)"/>
                        <ComboBoxItem Content="Achromatomaly (weak color)"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Inverted Grayscale"/>
                    </ComboBox>
                </StackPanel>

                <!-- Dual filters for Shape modes (Circle/Rectangle) -->
                <StackPanel x:Name="LMSShapePanel">
                    <TextBlock Text="Inside Shape" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="LMSInsideFilterTypeCombo" SelectionChanged="LMSInsideFilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="None" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia (red-blind)"/>
                        <ComboBoxItem Content="Protanomaly (red-weak)"/>
                        <ComboBoxItem Content="Deuteranopia (green-blind)"/>
                        <ComboBoxItem Content="Deuteranomaly (green-weak)"/>
                        <ComboBoxItem Content="Tritanopia (blue-blind)"/>
                        <ComboBoxItem Content="Tritanomaly (blue-weak)"/>
                        <ComboBoxItem Content="Achromatopsia (monochromacy)"/>
                        <ComboBoxItem Content="Achromatomaly (weak color)"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Inverted Grayscale"/>
                    </ComboBox>

                    <TextBlock Text="Outside Shape" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="LMSOutsideFilterTypeCombo" SelectionChanged="LMSOutsideFilterTypeCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="None" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia (red-blind)"/>
                        <ComboBoxItem Content="Protanomaly (red-weak)"/>
                        <ComboBoxItem Content="Deuteranopia (green-blind)"/>
                        <ComboBoxItem Content="Deuteranomaly (green-weak)"/>
                        <ComboBoxItem Content="Tritanopia (blue-blind)"/>
                        <ComboBoxItem Content="Tritanomaly (blue-weak)"/>
                        <ComboBoxItem Content="Achromatopsia (monochromacy)"/>
                        <ComboBoxItem Content="Achromatomaly (weak color)"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Inverted Grayscale"/>
                    </ComboBox>
                </StackPanel>
            </StackPanel>

            <!-- ============== RGB MATRIX PANEL ============== -->
            <StackPanel x:Name="RGBSettingsPanel" Visibility="Collapsed">
                <!-- Single matrix for Fullscreen mode -->
                <StackPanel x:Name="RGBFullscreenPanel" Visibility="Collapsed">
                    <TextBlock Text="Load Preset" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="RGBPresetCombo" SelectionChanged="RGBPresetCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="Normal Vision (Identity)" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia"/>
                        <ComboBoxItem Content="Protanomaly"/>
                        <ComboBoxItem Content="Deuteranopia"/>
                        <ComboBoxItem Content="Deuteranomaly"/>
                        <ComboBoxItem Content="Tritanopia"/>
                        <ComboBoxItem Content="Tritanomaly"/>
                        <ComboBoxItem Content="Achromatopsia"/>
                        <ComboBoxItem Content="Achromatomaly"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Sepia"/>
                    </ComboBox>

                    <!-- Matrix Editor (always visible) -->
                    <TextBlock Text="Color Matrix (3x3)" Style="{StaticResource LabelStyle}"/>
                    <TextBlock Text="Each row defines how R, G, B input maps to output" Opacity="0.6" FontSize="10" Margin="0,0,0,4"/>

                    <!-- Matrix Header -->
                    <Grid Margin="0,4,0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="1" Text="R in" HorizontalAlignment="Center" Opacity="0.7" FontSize="11"/>
                        <TextBlock Grid.Column="2" Text="G in" HorizontalAlignment="Center" Opacity="0.7" FontSize="11"/>
                        <TextBlock Grid.Column="3" Text="B in" HorizontalAlignment="Center" Opacity="0.7" FontSize="11"/>
                    </Grid>

                    <!-- Red Output Row -->
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="R out" VerticalAlignment="Center" Foreground="#FFCC6666" FontWeight="SemiBold"/>
                        <TextBox x:Name="InsideMatrixR0" Grid.Column="1" Text="1.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixR1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixR2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                    </Grid>

                    <!-- Green Output Row -->
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="G out" VerticalAlignment="Center" Foreground="#FF66CC66" FontWeight="SemiBold"/>
                        <TextBox x:Name="InsideMatrixG0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixG1" Grid.Column="2" Text="1.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixG2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                    </Grid>

                    <!-- Blue Output Row -->
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="B out" VerticalAlignment="Center" Foreground="#FF6666CC" FontWeight="SemiBold"/>
                        <TextBox x:Name="InsideMatrixB0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixB1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                        <TextBox x:Name="InsideMatrixB2" Grid.Column="3" Text="1.000" Margin="2" TextChanged="InsideMatrix_TextChanged"/>
                    </Grid>

                    <Button x:Name="ResetInsideMatrixButton" Content="Reset to Identity" Margin="0,8,0,0" Click="ResetInsideMatrixButton_Click"/>
                </StackPanel>

                <!-- Dual matrix for Shape modes (Circle/Rectangle) -->
                <StackPanel x:Name="RGBShapePanel">
                    <!-- Inside Matrix -->
                    <TextBlock Text="Inside Shape - Load Preset" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="RGBInsidePresetCombo" SelectionChanged="RGBInsidePresetCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="Normal Vision (Identity)" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia"/>
                        <ComboBoxItem Content="Protanomaly"/>
                        <ComboBoxItem Content="Deuteranopia"/>
                        <ComboBoxItem Content="Deuteranomaly"/>
                        <ComboBoxItem Content="Tritanopia"/>
                        <ComboBoxItem Content="Tritanomaly"/>
                        <ComboBoxItem Content="Achromatopsia"/>
                        <ComboBoxItem Content="Achromatomaly"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Sepia"/>
                    </ComboBox>

                    <!-- Inside Matrix Editor (always visible) -->
                    <TextBlock Text="Inside Matrix (3x3)" Opacity="0.7" FontSize="11" Margin="0,0,0,4"/>
                    <Grid Margin="0,4,0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="1" Text="R" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                        <TextBlock Grid.Column="2" Text="G" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                        <TextBlock Grid.Column="3" Text="B" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="R" VerticalAlignment="Center" Foreground="#FFCC6666"/>
                        <TextBox x:Name="ShapeInsideR0" Grid.Column="1" Text="1.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideR1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideR2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="G" VerticalAlignment="Center" Foreground="#FF66CC66"/>
                        <TextBox x:Name="ShapeInsideG0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideG1" Grid.Column="2" Text="1.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideG2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="B" VerticalAlignment="Center" Foreground="#FF6666CC"/>
                        <TextBox x:Name="ShapeInsideB0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideB1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeInsideB2" Grid.Column="3" Text="1.000" Margin="2" TextChanged="ShapeInsideMatrix_TextChanged"/>
                    </Grid>
                    <Button Content="Reset Inside" Margin="0,4,0,0" Click="ResetShapeInsideMatrixButton_Click"/>

                    <Separator Margin="0,8,0,8"/>

                    <!-- Outside Matrix -->
                    <TextBlock Text="Outside Shape - Load Preset" Style="{StaticResource LabelStyle}"/>
                    <ComboBox x:Name="RGBOutsidePresetCombo" SelectionChanged="RGBOutsidePresetCombo_SelectionChanged" Margin="0,0,0,8">
                        <ComboBoxItem Content="Normal Vision (Identity)" IsSelected="True"/>
                        <ComboBoxItem Content="Protanopia"/>
                        <ComboBoxItem Content="Protanomaly"/>
                        <ComboBoxItem Content="Deuteranopia"/>
                        <ComboBoxItem Content="Deuteranomaly"/>
                        <ComboBoxItem Content="Tritanopia"/>
                        <ComboBoxItem Content="Tritanomaly"/>
                        <ComboBoxItem Content="Achromatopsia"/>
                        <ComboBoxItem Content="Achromatomaly"/>
                        <ComboBoxItem Content="Grayscale"/>
                        <ComboBoxItem Content="Sepia"/>
                    </ComboBox>

                    <!-- Outside Matrix Editor (always visible) -->
                    <TextBlock Text="Outside Matrix (3x3)" Opacity="0.7" FontSize="11" Margin="0,0,0,4"/>
                    <Grid Margin="0,4,0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="1" Text="R" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                        <TextBlock Grid.Column="2" Text="G" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                        <TextBlock Grid.Column="3" Text="B" HorizontalAlignment="Center" Opacity="0.7" FontSize="10"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="R" VerticalAlignment="Center" Foreground="#FFCC6666"/>
                        <TextBox x:Name="ShapeOutsideR0" Grid.Column="1" Text="1.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideR1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideR2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="G" VerticalAlignment="Center" Foreground="#FF66CC66"/>
                        <TextBox x:Name="ShapeOutsideG0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideG1" Grid.Column="2" Text="1.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideG2" Grid.Column="3" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                    </Grid>
                    <Grid Margin="0,2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="B" VerticalAlignment="Center" Foreground="#FF6666CC"/>
                        <TextBox x:Name="ShapeOutsideB0" Grid.Column="1" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideB1" Grid.Column="2" Text="0.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                        <TextBox x:Name="ShapeOutsideB2" Grid.Column="3" Text="1.000" Margin="2" TextChanged="ShapeOutsideMatrix_TextChanged"/>
                    </Grid>
                    <Button Content="Reset Outside" Margin="0,4,0,0" Click="ResetShapeOutsideMatrixButton_Click"/>
                </StackPanel>
            </StackPanel>

            <Separator Margin="0,12,0,8"/>

            <!-- Common Settings -->
            <TextBlock Text="Adjustment" Style="{StaticResource SectionStyle}"/>

            <TextBlock Text="Intensity" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="IntensitySlider" Minimum="0" Maximum="1" Value="1"
                    Style="{StaticResource SliderStyle}" ValueChanged="IntensitySlider_ValueChanged"/>
            <TextBlock x:Name="IntensityValue" Text="1.00" Opacity="0.7" FontSize="11"/>

            <TextBlock Text="Color Boost (Saturation)" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="ColorBoostSlider" Minimum="0" Maximum="2" Value="1"
                    Style="{StaticResource SliderStyle}" ValueChanged="ColorBoostSlider_ValueChanged"/>
            <TextBlock x:Name="ColorBoostValue" Text="1.00" Opacity="0.7" FontSize="11"/>

            <Separator Margin="0,12,0,8"/>

            <!-- RGB Curves -->
            <TextBlock Text="RGB Curves" Style="{StaticResource SectionStyle}"/>

            <CheckBox x:Name="EnableCurvesCheckBox" Content="Enable RGB Curves" Margin="0,0,0,8"
                      IsChecked="False" Checked="EnableCurvesCheckBox_Changed" Unchecked="EnableCurvesCheckBox_Changed"/>

            <StackPanel x:Name="CurvesPanel">
                <TextBlock Text="Curve Strength" Style="{StaticResource LabelStyle}"/>
                <Slider x:Name="CurveStrengthSlider" Minimum="0" Maximum="1" Value="1"
                        Style="{StaticResource SliderStyle}" ValueChanged="CurveStrengthSlider_ValueChanged"/>
                <TextBlock x:Name="CurveStrengthValue" Text="1.00" Opacity="0.7" FontSize="11"/>

                <!-- Curve Editor -->
                <local:CurveEditor x:Name="CurveEditorControl" Height="200" Margin="0,8,0,0"
                                   CurveChanged="CurveEditorControl_CurveChanged"/>
            </StackPanel>

        </StackPanel>
    </StackPanel>
</UserControl>
