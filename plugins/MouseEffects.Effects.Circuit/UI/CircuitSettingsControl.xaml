<UserControl x:Class="MouseEffects.Effects.Circuit.UI.CircuitSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="400">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="10">

            <!-- Trace Settings -->
            <TextBlock Text="Trace Settings" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>

            <TextBlock Text="Trace Count" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=TraceCountSlider, StringFormat=F0}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="TraceCountSlider" Minimum="5" Maximum="30" Value="12" TickFrequency="1" IsSnapToTickEnabled="True" ValueChanged="TraceCountSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Growth Speed (px/s)" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=GrowthSpeedSlider, StringFormat=F0}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="GrowthSpeedSlider" Minimum="50" Maximum="400" Value="150" TickFrequency="10" IsSnapToTickEnabled="True" ValueChanged="GrowthSpeedSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Max Length (px)" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=MaxLengthSlider, StringFormat=F0}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="MaxLengthSlider" Minimum="50" Maximum="400" Value="200" TickFrequency="10" IsSnapToTickEnabled="True" ValueChanged="MaxLengthSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Branch Probability" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=BranchProbSlider, StringFormat=F2}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="BranchProbSlider" Minimum="0" Maximum="1" Value="0.3" TickFrequency="0.1" IsSnapToTickEnabled="True" ValueChanged="BranchProbSlider_Changed"/>
            </DockPanel>

            <Separator Margin="0,10"/>

            <!-- Appearance Settings -->
            <TextBlock Text="Appearance" FontWeight="Bold" FontSize="14" Margin="0,10,0,10"/>

            <TextBlock Text="Node Size" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=NodeSizeSlider, StringFormat=F1}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="NodeSizeSlider" Minimum="2" Maximum="10" Value="4" TickFrequency="0.5" IsSnapToTickEnabled="True" ValueChanged="NodeSizeSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Glow Intensity" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=GlowSlider, StringFormat=F1}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="GlowSlider" Minimum="0.5" Maximum="3" Value="1.5" TickFrequency="0.1" IsSnapToTickEnabled="True" ValueChanged="GlowSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Line Thickness" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=ThicknessSlider, StringFormat=F1}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="ThicknessSlider" Minimum="1" Maximum="6" Value="2.5" TickFrequency="0.5" IsSnapToTickEnabled="True" ValueChanged="ThicknessSlider_Changed"/>
            </DockPanel>

            <Separator Margin="0,10"/>

            <!-- Timing Settings -->
            <TextBlock Text="Timing" FontWeight="Bold" FontSize="14" Margin="0,10,0,10"/>

            <TextBlock Text="Trace Lifetime (seconds)" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=LifetimeSlider, StringFormat=F1}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="LifetimeSlider" Minimum="0.5" Maximum="5" Value="1.5" TickFrequency="0.1" IsSnapToTickEnabled="True" ValueChanged="LifetimeSlider_Changed"/>
            </DockPanel>

            <TextBlock Text="Spawn Threshold (px)" Margin="0,5,0,2"/>
            <DockPanel Margin="0,0,0,10">
                <TextBlock DockPanel.Dock="Right" Width="50" Text="{Binding Value, ElementName=ThresholdSlider, StringFormat=F0}" TextAlignment="Right" Margin="5,0,0,0"/>
                <Slider x:Name="ThresholdSlider" Minimum="20" Maximum="150" Value="50" TickFrequency="5" IsSnapToTickEnabled="True" ValueChanged="ThresholdSlider_Changed"/>
            </DockPanel>

            <Separator Margin="0,10"/>

            <!-- Color Settings -->
            <TextBlock Text="Color" FontWeight="Bold" FontSize="14" Margin="0,10,0,10"/>

            <TextBlock Text="Color Preset" Margin="0,5,0,2"/>
            <ComboBox x:Name="ColorPresetCombo" Margin="0,0,0,10" SelectionChanged="ColorPresetCombo_Changed">
                <ComboBoxItem Content="Classic Green" IsSelected="True"/>
                <ComboBoxItem Content="Cyan"/>
                <ComboBoxItem Content="Gold PCB"/>
                <ComboBoxItem Content="Orange"/>
                <ComboBoxItem Content="Purple"/>
                <ComboBoxItem Content="Custom"/>
            </ComboBox>

            <StackPanel x:Name="CustomColorPanel" Visibility="Collapsed" Margin="0,10,0,0">
                <TextBlock Text="Custom Color (RGB)" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,5,0">
                        <TextBlock Text="Red" Margin="0,0,0,2"/>
                        <Slider x:Name="CustomRSlider" Minimum="0" Maximum="1" Value="0" TickFrequency="0.01" ValueChanged="CustomColorSlider_Changed"/>
                        <TextBlock Text="{Binding Value, ElementName=CustomRSlider, StringFormat=F2}" HorizontalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="5,0">
                        <TextBlock Text="Green" Margin="0,0,0,2"/>
                        <Slider x:Name="CustomGSlider" Minimum="0" Maximum="1" Value="1" TickFrequency="0.01" ValueChanged="CustomColorSlider_Changed"/>
                        <TextBlock Text="{Binding Value, ElementName=CustomGSlider, StringFormat=F2}" HorizontalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Margin="5,0,0,0">
                        <TextBlock Text="Blue" Margin="0,0,0,2"/>
                        <Slider x:Name="CustomBSlider" Minimum="0" Maximum="1" Value="0" TickFrequency="0.01" ValueChanged="CustomColorSlider_Changed"/>
                        <TextBlock Text="{Binding Value, ElementName=CustomBSlider, StringFormat=F2}" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>

                <Border x:Name="ColorPreview" Height="30" Background="#00FF00" CornerRadius="3" Margin="0,10,0,0"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>
