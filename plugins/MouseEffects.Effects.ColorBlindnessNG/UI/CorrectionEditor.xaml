<UserControl x:Class="MouseEffects.Effects.ColorBlindnessNG.UI.CorrectionEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:MouseEffects.Effects.ColorBlindnessNG.UI">
    <UserControl.Resources>
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,8,0,4"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style x:Key="ChannelHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="4,0,0,0"/>
        </Style>
        <Style x:Key="SmallLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style x:Key="ValueStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Opacity" Value="0.7"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </UserControl.Resources>

    <StackPanel>
        <!-- Application Mode -->
        <TextBlock Text="Application Mode" Style="{StaticResource LabelStyle}"/>
        <ComboBox x:Name="AppModeCombo" SelectionChanged="AppMode_Changed" Margin="0,0,0,8">
            <ComboBoxItem Content="Full Channel" IsSelected="True"/>
            <ComboBoxItem Content="Dominant Only"/>
            <ComboBoxItem Content="Threshold"/>
        </ComboBox>

        <StackPanel x:Name="ThresholdPanel" Visibility="Collapsed">
            <TextBlock x:Name="ThresholdLabel" Text="Threshold (0.30)" Style="{StaticResource LabelStyle}"/>
            <Slider x:Name="ThresholdSlider" Minimum="0" Maximum="1" Value="0.3"
                    ValueChanged="Threshold_Changed"/>
        </StackPanel>

        <!-- Gradient Type -->
        <TextBlock Text="Gradient Interpolation" Style="{StaticResource LabelStyle}"/>
        <ComboBox x:Name="GradientCombo" SelectionChanged="Gradient_Changed" Margin="0,0,0,8">
            <ComboBoxItem Content="Linear RGB" IsSelected="True"/>
            <ComboBoxItem Content="Perceptual LAB"/>
            <ComboBoxItem Content="HSL"/>
        </ComboBox>

        <!-- Color Transformation Preview -->
        <TextBlock Text="Color Transformation Preview" Style="{StaticResource LabelStyle}"/>
        <local:ColorPreviewStrip x:Name="PreviewStrip" Height="60" Margin="0,0,0,8"/>

        <Separator Margin="0,8,0,8"/>

        <!-- Red Channel -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <CheckBox x:Name="RedEnabled" Grid.Column="0" VerticalAlignment="Center"
                      Checked="Channel_Changed" Unchecked="Channel_Changed"/>
            <TextBlock Grid.Column="1" Text="Red Channel" Foreground="#FFCC6666"
                       Style="{StaticResource ChannelHeaderStyle}"/>
        </Grid>
        <StackPanel x:Name="RedPanel" Visibility="Collapsed" Margin="20,0,0,0">
            <TextBlock x:Name="RedStrengthLabel" Text="Strength (1.00)" Style="{StaticResource SmallLabelStyle}"/>
            <Slider x:Name="RedStrength" Minimum="0" Maximum="1" Value="1"
                    ValueChanged="Channel_Changed"/>

            <!-- Color Mapping Gradient -->
            <TextBlock Text="Color Mapping" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"/>
            <local:GradientEditor x:Name="RedGradient" Height="32" ValueChanged="RedGradient_ValueChanged"/>

            <TextBlock x:Name="RedWhiteProtLabel" Text="White Protection (0.01)" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,0"/>
            <Slider x:Name="RedWhiteProt" Minimum="0.01" Maximum="1" Value="0.01"
                    ValueChanged="Channel_Changed"/>
            <TextBlock x:Name="RedDominanceLabel" Text="Dominance Threshold (Off)" Style="{StaticResource SmallLabelStyle}" Margin="0,4,0,0"
                       ToolTip="Min % of total color this channel must have. Use to exclude yellows when correcting reds."/>
            <Slider x:Name="RedDominance" Minimum="0" Maximum="0.9" Value="0"
                    ValueChanged="Channel_Changed"/>

            <!-- Blend Mode Visual Selection -->
            <TextBlock Text="Blend Mode" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"
                       ToolTip="How LUT colors blend with original. Try 'Direct' for dark colors."/>
            <local:BlendModePreview x:Name="RedBlendMode" Height="36" SelectionChanged="RedBlendMode_SelectionChanged"/>
        </StackPanel>

        <!-- Green Channel -->
        <Grid Margin="0,8,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <CheckBox x:Name="GreenEnabled" Grid.Column="0" VerticalAlignment="Center"
                      Checked="Channel_Changed" Unchecked="Channel_Changed"/>
            <TextBlock Grid.Column="1" Text="Green Channel" Foreground="#FF66CC66"
                       Style="{StaticResource ChannelHeaderStyle}"/>
        </Grid>
        <StackPanel x:Name="GreenPanel" Visibility="Collapsed" Margin="20,0,0,0">
            <TextBlock x:Name="GreenStrengthLabel" Text="Strength (1.00)" Style="{StaticResource SmallLabelStyle}"/>
            <Slider x:Name="GreenStrength" Minimum="0" Maximum="1" Value="1"
                    ValueChanged="Channel_Changed"/>

            <!-- Color Mapping Gradient -->
            <TextBlock Text="Color Mapping" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"/>
            <local:GradientEditor x:Name="GreenGradient" Height="32" ValueChanged="GreenGradient_ValueChanged"/>

            <TextBlock x:Name="GreenWhiteProtLabel" Text="White Protection (0.01)" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,0"/>
            <Slider x:Name="GreenWhiteProt" Minimum="0.01" Maximum="1" Value="0.01"
                    ValueChanged="Channel_Changed"/>
            <TextBlock x:Name="GreenDominanceLabel" Text="Dominance Threshold (Off)" Style="{StaticResource SmallLabelStyle}" Margin="0,4,0,0"
                       ToolTip="Min % of total color this channel must have. Use to exclude cyans when correcting greens."/>
            <Slider x:Name="GreenDominance" Minimum="0" Maximum="0.9" Value="0"
                    ValueChanged="Channel_Changed"/>

            <!-- Blend Mode Visual Selection -->
            <TextBlock Text="Blend Mode" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"
                       ToolTip="How LUT colors blend with original. Try 'Direct' for dark colors."/>
            <local:BlendModePreview x:Name="GreenBlendMode" Height="36" SelectionChanged="GreenBlendMode_SelectionChanged"/>
        </StackPanel>

        <!-- Blue Channel -->
        <Grid Margin="0,8,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <CheckBox x:Name="BlueEnabled" Grid.Column="0" VerticalAlignment="Center"
                      Checked="Channel_Changed" Unchecked="Channel_Changed"/>
            <TextBlock Grid.Column="1" Text="Blue Channel" Foreground="#FF6699FF"
                       Style="{StaticResource ChannelHeaderStyle}"/>
        </Grid>
        <StackPanel x:Name="BluePanel" Visibility="Collapsed" Margin="20,0,0,0">
            <TextBlock x:Name="BlueStrengthLabel" Text="Strength (1.00)" Style="{StaticResource SmallLabelStyle}"/>
            <Slider x:Name="BlueStrength" Minimum="0" Maximum="1" Value="1"
                    ValueChanged="Channel_Changed"/>

            <!-- Color Mapping Gradient -->
            <TextBlock Text="Color Mapping" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"/>
            <local:GradientEditor x:Name="BlueGradient" Height="32" ValueChanged="BlueGradient_ValueChanged"/>

            <TextBlock x:Name="BlueWhiteProtLabel" Text="White Protection (0.01)" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,0"/>
            <Slider x:Name="BlueWhiteProt" Minimum="0.01" Maximum="1" Value="0.01"
                    ValueChanged="Channel_Changed"/>
            <TextBlock x:Name="BlueDominanceLabel" Text="Dominance Threshold (Off)" Style="{StaticResource SmallLabelStyle}" Margin="0,4,0,0"
                       ToolTip="Min % of total color this channel must have. Use to exclude purples when correcting blues."/>
            <Slider x:Name="BlueDominance" Minimum="0" Maximum="0.9" Value="0"
                    ValueChanged="Channel_Changed"/>

            <!-- Blend Mode Visual Selection -->
            <TextBlock Text="Blend Mode" Style="{StaticResource SmallLabelStyle}" Margin="0,8,0,4"
                       ToolTip="How LUT colors blend with original. Try 'Direct' for dark colors."/>
            <local:BlendModePreview x:Name="BlueBlendMode" Height="36" SelectionChanged="BlueBlendMode_SelectionChanged"/>
        </StackPanel>
    </StackPanel>
</UserControl>
